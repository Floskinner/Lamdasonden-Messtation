{% extends "base.jinja" %}

{% block title %}Lamdawerte{% endblock title %}

{% block pageNavbar %}
<div class="w3-bar-item">
    Aufnahme:
    <label class="switch">
        <input id="recording" type="checkbox">
        <span class="slider round"></span>
    </label>
</div>

{{ super() }}
{% endblock pageNavbar %}

{% block main %}
{% include "baenke.jinja" %}
{% include "temperaturen.jinja" %}
{% endblock %}


{% block javaScript %}
{{ super() }}
<script src="../static/javascript/socket.io.min.js"></script>
<script src="../static/javascript/mySockets.js"></script>
{% endblock javaScript %}

{% block pageJavaScript %}
<script type="text/javascript" charset="utf-8">

    const UPDATE_INTERVALL = {{ update_intervall }};
    const menueModal = $("#menueModal");

    $(document).ready(function () {
        $("#recording").click(toogleRecording);

        // Anwenden der Konfiguration
        show_banks({{ ANZEIGEN_BANK_1 | default("true") | lower}}, {{ ANZEIGEN_BANK_2 | default("true") | lower}});
        blinking = {{ WARNUNG_BLINKEN | default ("false") | lower }};
        decimalPlaces = {{ NACHKOMMASTELLEN | default ("2") }};
    });


    function toogleRecording() {
        if ($("#recording").prop("checked")) {

            // Hide Button wenn aufgenommen wird
            $('#menueIcon').hide("slow");

            socket.emit("recording", {
                "recording": true
            });
        } else {
            // Show Button wenn aufgenommen stoppt
            $('#menueIcon').show("slow");

            socket.emit("recording", {
                "recording": false
            });
        }
    }

    function show_banks(bank1, bank2) {
        if (bank1) {
            $("#bank1").show();
        } else {
            $("#bank1").hide();
        }

        if (bank2) {
            $("#bank2").show();
        } else {
            $("#bank2").hide();
        }

        if (bank1 ^ bank2) {
            $('.mybackround').addClass('hidden');
        }
        else {
            $('.mybackround').removeClass('hidden');
        }
    }

</script>
{% endblock pageJavaScript %}