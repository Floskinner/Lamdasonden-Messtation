{% extends "base.jinja" %}

{% block title %}System{% endblock title %}

{% block head %}
{{ super() }}
<link rel="stylesheet" href="../static/css/system.css">
{% endblock head %}

{% block pageNavbar %}

<a href="/" class="header-left w3-button fa fa-arrow-left"></a>

<div class="header-right">
    <a href="{{ url_for('system.system_diagnostics') }}" class="w3-bar-item w3-button w3-right fa fa-download"
        title="Download Diagnostic"></a>
</div>

{{ super() }}
{% endblock pageNavbar %}

{% block main %}

<div class="system-page">
    <div class="system-container">
        <!-- Header -->
        <div class="system-header">
            <h2 class="system-title"><b>System</b></h2>
        </div>

        <!-- System Info (Version & Hostname) -->
        <div class="system-info">
            <div class="system-info-row">
                <span class="system-info-label">Version</span>
                <span class="system-info-value">{{ os_version }}</span>
            </div>
            <div class="system-info-row">
                <span class="system-info-label">Hostname</span>
                <span class="system-info-value">{{ os_name }}</span>
            </div>
        </div>

        <!-- CPU and RAM Cards Side by Side -->
        <div class="stats-grid">
            <!-- CPU Card -->
            <div class="stat-card">
                <div class="stat-card-header">CPU</div>
                <div class="stat-item">
                    <div class="stat-value">{{ os_cpu | round(1) }}%</div>
                    <div class="stat-label">Usage</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">{{ os_temperatur | round(1) }}Â°C</div>
                    <div class="stat-label">Temp</div>
                </div>
            </div>

            <!-- RAM Card -->
            <div class="stat-card">
                <div class="stat-card-header">RAM</div>
                <div class="stat-item">
                    <div class="stat-value">{{ os_ram_percent | round(1) }}%</div>
                    <div class="stat-label">Used</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">{{ (os_ram_available / 1024) | round(1) }}GB</div>
                    <div class="stat-label">Free</div>
                </div>
            </div>
        </div>

        <!-- Storage Card (Full Width) -->
        <div class="storage-card">
            <div class="storage-header">SD Card</div>
            <div class="storage-stats">
                <div class="storage-item">
                    <div class="stat-value">{{ os_disk_total }}GB</div>
                    <div class="stat-label">Total</div>
                </div>
                <div class="storage-item">
                    <div class="stat-value">{{ os_disk_used }}GB</div>
                    <div class="stat-label">Used</div>
                </div>
                <div class="storage-item">
                    <div class="stat-value">{{ os_disk_free }}GB</div>
                    <div class="stat-label">Free</div>
                </div>
            </div>
            <!-- Storage usage bar -->
            <div class="storage-bar-container">
                {% set used_percent = 100 - os_disk_free_percent %}
                <div class="storage-bar">
                    <div class="storage-bar-fill {% if used_percent > 90 %}danger{% elif used_percent > 75 %}warning{% endif %}"
                         style="width: {{ used_percent | round(1) }}%"></div>
                </div>
            </div>
        </div>

        <!-- Download Action -->
        <div class="system-actions">
            <a class="w3-button w3-round-large w3-border w3-green" href="{{ url_for('system.system_diagnostics') }}">
                Download Diagnostic
            </a>
        </div>
    </div>
</div>

{% endblock %}
